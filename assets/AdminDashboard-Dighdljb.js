import{r,j as e,u as V,F as x}from"./index-SXu9pS1V.js";import{J as G}from"./JobPostForm-t9zCd72r.js";import{j as f,k as P}from"./index-BwX07M8r.js";import{B as W}from"./BlogPostForm-IbDx9ixZ.js";import"./Error-BSKFbttL.js";const z=({editingUser:a,isEditing:l,setIsEditing:u,setActiveTab:N})=>{const[d,m]=r.useState({name:"",email:"",role:"",password:""});r.useEffect(()=>{m(l&&a?{name:a.name,email:a.email,role:a.role,password:""}:{name:"",email:"",role:"",password:""})},[l,a]);const i=j=>{const{name:p,value:y}=j.target;m(b=>({...b,[p]:y}))},g=async j=>{j.preventDefault();const p=l?a?`https://har-backend.vercel.app/api/users/${a.id}`:"-1":"https://har-backend.vercel.app/api/users",y=l?"PUT":"POST";try{await fetch(p,{method:y,headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),u(!1),N("users")}catch(b){console.error("Error submitting form:",b)}};return e.jsxs("form",{onSubmit:g,className:"bg-white p-6 rounded shadow-md",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-bold mb-2",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:d.name,onChange:i,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-bold mb-2",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:d.email,onChange:i,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-bold mb-2",children:"Role"}),e.jsxs("select",{id:"role",name:"role",value:d.role,onChange:i,className:"w-full p-2 border border-gray-300 rounded",required:!0,children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"ADMIN",children:"Admin"}),e.jsx("option",{value:"JOBS_ADMIN",children:"Jobs Admin"}),e.jsx("option",{value:"BLOG_ADMIN",children:"Blog Admin"})]})]}),!l&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-bold mb-2",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:d.password,onChange:i,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full py-2 px-4 bg-harPrimary text-white font-bold rounded",children:l?"Update User":"Add User"})]})},Z=()=>{const[a,l]=r.useState("employees"),[u,N]=r.useState([]),[d,m]=r.useState([]),[i,g]=r.useState([]),[j,p]=r.useState(null),[y,b]=r.useState(null),[C,v]=r.useState(!1),[E,w]=r.useState(!1),[k,A]=r.useState([]),[D,S]=r.useState(null),[B,J]=r.useState(!1),$={id:1,name:"John Doe",role:"Admin"},c=V();r.useEffect(()=>{let s=!0;const n=async()=>{try{const t=await fetch("https://har-backend.vercel.app/api/job-applications",{credentials:"include"});if(t.status===401)c("/login");else if(s){const h=await t.json();N(h)}}catch(t){console.error("Error fetching job applications:",t)}},o=async()=>{try{const t=await fetch("https://har-backend.vercel.app/api/job-postings/all",{credentials:"include"});if(t.status===401)c("/login");else if(s){const h=await t.json();m(h)}}catch(t){console.error("Error fetching job postings:",t)}},R=async()=>{try{const t=await fetch("https://har-backend.vercel.app/api/users",{credentials:"include"});if(t.status===401)c("/login");else if(s){const h=await t.json();g(h)}}catch(t){console.error("Error fetching users:",t)}},_=async()=>{try{const t=await fetch("https://har-backend.vercel.app/api/blog-postings/all",{credentials:"include"});if(t.status===401)c("/login");else if(s){const h=await t.json();A(h)}}catch(t){console.error("Error fetching blog posts:",t)}};return n(),o(),R(),_(),()=>{s=!1}},[c]);const T=async s=>{try{(await fetch(`https://har-backend.vercel.app/api/job-applications/${s}`,{method:"DELETE",credentials:"include"})).status===401?c("/login"):N(u.filter(o=>o.id!==s))}catch(n){console.error("Error deleting application:",n)}},U=async s=>{try{(await fetch(`https://har-backend.vercel.app/api/job-postings/${s}`,{method:"DELETE",credentials:"include"})).status===401?c("/login"):m(d.filter(o=>o.id!==s))}catch(n){console.error("Error deleting job posting:",n)}},I=async s=>{try{(await fetch(`https://har-backend.vercel.app/api/users/${s}`,{method:"DELETE",credentials:"include"})).status===401?c("/login"):g(i.filter(o=>o.id!==s))}catch(n){console.error("Error deleting user:",n)}},F=async s=>{try{(await fetch(`https://har-backend.vercel.app/api/blogs/${s}`,{method:"DELETE",credentials:"include"})).status===401?c("/login"):A(k.filter(o=>o.id!==s))}catch(n){console.error("Error deleting blog post:",n)}},L=s=>{p(s),v(!0),l("addJobPost")},M=s=>{b(s),w(!0),l("addUser")},O=s=>{S(s),J(!0),l("addBlogPost")},q=async()=>{try{await fetch("https://har-backend.vercel.app/api/logout",{method:"POST",credentials:"include"}),c("/login")}catch(s){console.error("Error logging out:",s)}};return e.jsxs("div",{className:"min-h-screen bg-gray-100 p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center text-harPrimary",children:"Admin Dashboard"}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>l("employees"),className:`px-4 py-2 rounded ${a==="employees"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Potential Employees"}),e.jsx("button",{onClick:()=>l("jobPosts"),className:`px-4 py-2 rounded ${a==="jobPosts"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Job Posts"}),e.jsx("button",{onClick:()=>l("blogPosts"),className:`px-4 py-2 rounded ${a==="blogPosts"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Blog Posts"}),e.jsx("button",{onClick:()=>l("users"),className:`px-4 py-2 rounded ${a==="users"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Users"})]}),e.jsx("button",{onClick:q,className:"px-4 py-2 bg-harPrimary text-white rounded",children:"Logout"})]}),a==="employees"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Job Applications"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Applicant Name"}),e.jsx("th",{className:"py-2 px-4",children:"Position"}),e.jsx("th",{className:"py-2 px-4",children:"About"}),e.jsx("th",{className:"py-2 px-4",children:"Motive"}),e.jsx("th",{className:"py-2 px-4",children:"Age"}),e.jsx("th",{className:"py-2 px-4",children:"Gender"}),e.jsx("th",{className:"py-2 px-4",children:"Phone"}),e.jsx("th",{className:"py-2 px-4",children:"Email"}),e.jsx("th",{className:"py-2 px-4",children:"Portfolio"}),e.jsx("th",{className:"py-2 px-4",children:"CV"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:u.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:s.name}),e.jsx("td",{className:"py-2 px-4",children:s.interest}),e.jsx("td",{className:"py-2 px-4",children:s.about}),e.jsx("td",{className:"py-2 px-4",children:s.motive}),e.jsx("td",{className:"py-2 px-4",children:s.age}),e.jsx("td",{className:"py-2 px-4",children:s.gender}),e.jsx("td",{className:"py-2 px-4",children:s.phone}),e.jsx("td",{className:"py-2 px-4",children:s.email}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("a",{href:s.portfolio,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"View"})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("a",{href:s.cv,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"View"})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("button",{onClick:()=>T(s.id),className:"text-red-500",children:e.jsx(x,{icon:f})})})]},s.id))})]})})]}),a==="jobPosts"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Job Postings"}),e.jsx("button",{onClick:()=>{p(null),v(!1),l("addJobPost")},className:"px-4 py-2 bg-harSecondary text-white rounded mb-4",children:"Add Job Posting"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Company Name"}),e.jsx("th",{className:"py-2 px-4",children:"Job Title"}),e.jsx("th",{className:"py-2 px-4",children:"Location"}),e.jsx("th",{className:"py-2 px-4",children:"Posting Date"}),e.jsx("th",{className:"py-2 px-4",children:"Experience Level"}),e.jsx("th",{className:"py-2 px-4",children:"Job Type"}),e.jsx("th",{className:"py-2 px-4",children:"Employment Type"}),e.jsx("th",{className:"py-2 px-4",children:"Work Arrangement"}),e.jsx("th",{className:"py-2 px-4",children:"Application Deadline"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:d.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:s.jobTitle}),e.jsx("td",{className:"py-2 px-4",children:s.companyName}),e.jsx("td",{className:"py-2 px-4",children:s.location}),e.jsx("td",{className:"py-2 px-4",children:s.jobType}),e.jsx("td",{className:"py-2 px-4",children:s.jobCategory}),e.jsx("td",{className:"py-2 px-4",children:s.workArrangement}),e.jsx("td",{className:"py-2 px-4",children:s.experienceLevel}),e.jsx("td",{className:"py-2 px-4",children:s.contactEmail}),e.jsx("td",{className:"py-2 px-4",children:s.applicationDeadline}),e.jsxs("td",{className:"py-2 px-4 flex space-x-2",children:[e.jsx("button",{onClick:()=>L(s),className:"text-green-500",children:e.jsx(x,{icon:P})}),e.jsx("button",{onClick:()=>U(s.id),className:"text-red-500",children:e.jsx(x,{icon:f})})]})]},s.id))})]})})]}),a==="addJobPost"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:C?"Edit Job Posting":"Add Job Posting"}),e.jsx(G,{job:j})]}),a==="blogPosts"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Blog Posts"}),e.jsx("button",{onClick:()=>{S(null),J(!1),l("addBlogPost")},className:"px-4 py-2 bg-harSecondary text-white rounded mb-4",children:"Add Blog Post"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Title"}),e.jsx("th",{className:"py-2 px-4",children:"Category"}),e.jsx("th",{className:"py-2 px-4",children:"Content"}),e.jsx("th",{className:"py-2 px-4",children:"Author ID"}),e.jsx("th",{className:"py-2 px-4",children:"Publication Date"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:k.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:s.title}),e.jsx("td",{className:"py-2 px-4",children:s.category}),e.jsx("td",{className:"py-2 px-4",children:s.content}),e.jsx("td",{className:"py-2 px-4",children:s.authorId}),e.jsx("td",{className:"py-2 px-4",children:"post.publicationDate"}),e.jsxs("td",{className:"py-2 px-4 flex space-x-2",children:[e.jsx("button",{onClick:()=>O(s),className:"text-green-500",children:e.jsx(x,{icon:P})}),e.jsx("button",{onClick:()=>F(s.id),className:"text-red-500",children:e.jsx(x,{icon:f})})]})]},s.id))})]})})]}),a==="addBlogPost"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:B?"Edit Blog Post":"Add Blog Post"}),e.jsx(W,{post:D,currentUserId:$.id})]}),a==="users"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Users"}),e.jsx("button",{onClick:()=>{b(null),w(!1),l("addUser")},className:"px-4 py-2 bg-harSecondary text-white rounded mb-4",children:"Add User"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Name"}),e.jsx("th",{className:"py-2 px-4",children:"Email"}),e.jsx("th",{className:"py-2 px-4",children:"Role"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:s.name}),e.jsx("td",{className:"py-2 px-4",children:s.email}),e.jsx("td",{className:"py-2 px-4",children:s.role}),e.jsxs("td",{className:"py-2 px-4 flex space-x-2",children:[e.jsx("button",{onClick:()=>M(s),className:"text-green-500",children:e.jsx(x,{icon:P})}),e.jsx("button",{onClick:()=>I(s.id),className:"text-red-500",children:e.jsx(x,{icon:f})})]})]},s.id))})]})})]}),a==="addUser"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:E?"Edit User":"Add User"}),e.jsx(z,{editingUser:y,isEditing:E,setIsEditing:w,setActiveTab:l})]})]})};export{Z as default};
