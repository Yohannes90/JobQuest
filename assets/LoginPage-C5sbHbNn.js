import{r as n,j as e,F as x}from"./index-CtM658qn.js";import{h as b,i as f}from"./index-BwX07M8r.js";const j=()=>{const[s,i]=n.useState({email:"",password:""}),[t,h]=n.useState(!1),[c,o]=n.useState(""),d=l=>{const{name:a,value:r}=l.target;i({...s,[a]:r})},p=async l=>{l.preventDefault();try{const a=await fetch("https://har-backend.vercel.app/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"});if(a.ok){const r=await fetch("https://har-backend.vercel.app/api/role",{method:"GET",credentials:"include"});if(r.ok){const m=(await r.json()).role;switch(console.log("User Role:",m),m){case"ADMIN":window.location.href="/admin";break;case"JOBS_ADMIN":window.location.href="/jobs-dashboard";break;case"BLOG_ADMIN":window.location.href="/blog-dashboard";break;default:o("Access denied: Invalid user role");break}}else o("Failed to fetch user role.")}else{const r=await a.json();o(r.error||"Invalid email or password")}i({email:"",password:""})}catch(a){console.error("Error:",a),o("An error occurred. Please try again.")}},u=()=>{h(!t)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-harSecondary/100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-2xl space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"uppercase text-4xl font-bold text-harPrimary",children:"Admin Login"}),e.jsx("p",{className:"mt-2 text-lg text-harAccent",children:"Please login to access the admin dashboard."})]}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[c&&e.jsx("p",{className:"text-red-600 mb-4",children:c}),e.jsxs("form",{className:"space-y-6",onSubmit:p,children:[e.jsx("div",{className:"relative",children:e.jsx("input",{type:"email",name:"email",id:"email",placeholder:"Email",value:s.email,onChange:d,className:"block w-full px-4 py-3 border text-black bg-slate-100 autofill:bg-slate-100 border-harSecondary rounded-md shadow-sm focus:ring-harPrimary focus:border-harPrimary",required:!0})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:t?"text":"password",name:"password",id:"password",placeholder:"Password",value:s.password,onChange:d,className:"block w-full px-4 py-3 border text-black bg-slate-100 border-harSecondary rounded-md shadow-sm focus:ring-harPrimary focus:border-harPrimary",required:!0}),e.jsx("div",{onClick:u,className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer text-harSecondary",children:e.jsx(x,{icon:t?b:f})})]}),e.jsx("div",{className:"flex w-full justify-center",children:e.jsx("button",{type:"submit",className:"w-full py-3 px-6 outline-none text-lg font-medium rounded-md text-white bg-harPrimary hover:bg-harSecondary transition duration-200",children:"Login"})})]})]})]})})};export{j as default};
