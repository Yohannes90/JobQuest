import{r as a,u as N,j as s,F as x}from"./index-WyY7Y9BC.js";import{B as f}from"./BlogPostForm-Drw7pdRR.js";import{k as P,j as B}from"./index-BwX07M8r.js";const A=()=>{const[l,r]=a.useState("blogPosts"),[n,i]=a.useState([]),[m,d]=a.useState(null),[g,h]=a.useState(!1),p={id:1,name:"John Doe",role:"Admin"},o=N();a.useEffect(()=>{let e=!0;(async()=>{try{const t=await fetch("http://localhost:3001/api/blog-postings/all",{credentials:"include"});if(t.status===401)o("/login");else if(e){const y=await t.json();i(y)}}catch(t){console.error("Error fetching blog posts:",t)}})()},[o]);const b=async e=>{try{(await fetch(`http://localhost:3001/api/blogs/${e}`,{method:"DELETE",credentials:"include"})).status===401?o("/login"):i(n.filter(t=>t.id!==e))}catch(c){console.error("Error deleting blog post:",c)}},u=e=>{d(e),h(!0),r("addBlogPost")},j=async()=>{try{await fetch("https://har-backend.vercel.app/api/logout",{method:"POST",credentials:"include"}),o("/login")}catch(e){console.error("Error logging out:",e)}};return s.jsxs("div",{className:"min-h-screen bg-gray-100 p-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8 text-center text-harPrimary",children:"Blog Admin Dashboard"}),s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsx("div",{className:"flex space-x-4",children:s.jsx("button",{onClick:()=>r("blogPosts"),className:`px-4 py-2 rounded ${l==="blogPosts"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Blog Posts"})}),s.jsx("button",{onClick:j,className:"px-4 py-2 bg-harPrimary text-white rounded",children:"Logout"})]}),l==="blogPosts"&&s.jsxs("div",{className:"mb-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Blog Posts"}),s.jsx("button",{onClick:()=>{d(null),h(!1),r("addBlogPost")},className:"px-4 py-2 bg-harSecondary text-white rounded mb-4",children:"Add Blog Post"}),s.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:s.jsxs("table",{className:"min-w-full bg-white",children:[s.jsx("thead",{className:"bg-harPrimary text-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-2 px-4",children:"Title"}),s.jsx("th",{className:"py-2 px-4",children:"Category"}),s.jsx("th",{className:"py-2 px-4",children:"Content"}),s.jsx("th",{className:"py-2 px-4",children:"Author ID"}),s.jsx("th",{className:"py-2 px-4",children:"Publication Date"}),s.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),s.jsx("tbody",{children:n.map(e=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-2 px-4",children:e.title}),s.jsx("td",{className:"py-2 px-4",children:e.category}),s.jsx("td",{className:"py-2 px-4",children:e.content}),s.jsx("td",{className:"py-2 px-4",children:e.authorId}),s.jsx("td",{className:"py-2 px-4",children:"post.publicationDate"}),s.jsxs("td",{className:"py-2 px-4 flex space-x-2",children:[s.jsx("button",{onClick:()=>u(e),className:"text-green-500",children:s.jsx(x,{icon:P})}),s.jsx("button",{onClick:()=>b(e.id),className:"text-red-500",children:s.jsx(x,{icon:B})})]})]},e.id))})]})})]}),l==="addBlogPost"&&s.jsxs("div",{className:"mb-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:g?"Edit Blog Post":"Add Blog Post"}),s.jsx(f,{post:m,currentUserId:p.id})]})]})};export{A as default};
