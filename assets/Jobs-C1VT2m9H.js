import{j as e,F as x,u as A,r as i}from"./index-DvA_QhIf.js";import{f as D,a as M,b as q,c as H,d as R,e as B,g as O}from"./index-BwX07M8r.js";const U=({query:s,handleInputChange:l})=>e.jsx("div",{className:"mt-20 py-10 max-w-screen-2xl container",children:e.jsx("div",{className:"flex flex-grow justify-center",children:e.jsx("form",{action:"",method:"get",className:"w-11/12 sm:w-3/4",children:e.jsxs("div",{className:"flex justify-start flex-grow gap-1",children:[e.jsxs("div",{className:"relative py-1 px-6 focus:outline-0 bg-white h-auto rounded shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-harSecondary w-full",children:[e.jsx("input",{type:"text",name:"query",id:"query",className:"w-full bg-white py-2 px-4 focus:outline-0",placeholder:"What position are you looking for ?",onChange:l,value:s}),e.jsx(x,{icon:D,className:"absolute bottom-1/2 translate-y-1/2 left-5"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"h-full px-1 sm:px-3 rounded-sm text-white font-mono sm:tracking-wider bg-harSecondary",children:"Search"})})]})})})}),W=({result:s})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("h3",{className:"text-black text-lg font-bold",children:[s.length," Jobs"]})}),e.jsx("section",{children:s})]}),Q=({job:s})=>{const l=A(),d=()=>{l("/job-application-form",{state:{job:s}})},{companyName:c,jobTitle:u,applicationDeadline:m,experienceLevel:a,jobType:f,description:v,jobCategory:y,workArrangement:p}=s;function n(b){return b.replace(/_/g," ")}function w(b){const h=new Date(b),g=h.getFullYear(),k=String(h.getMonth()+1).padStart(2,"0");return`${String(h.getDay()).padStart(2,"0")}-${k}-${g}`}return e.jsxs("section",{className:"card grid grid-cols-4 transform hover:ease-in-out duration-200 hover:border-harSecondary focus:border-harSecondary",onClick:d,children:[e.jsx("img",{src:"/icon.png",className:"h-8 w-8 sm:h-12 sm:w-14 col-span-1",alt:""}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("h4",{className:"text-black mb-1",children:c}),e.jsx("h3",{className:"text-black text-lg font-semibold mb-2",children:u}),e.jsxs("div",{className:"text-black/60 text-sm sm:text-base flex flex-wrap gap-4 mb-2",children:[e.jsxs("span",{children:[e.jsx(x,{icon:M})," ",n(f)]}),e.jsxs("span",{children:[e.jsx(x,{icon:q})," ",n(p)]}),e.jsxs("span",{children:[e.jsx(x,{icon:H})," ",n(a)]}),e.jsxs("span",{children:[e.jsx(x,{icon:R})," ",y==="hr"?"human resource":n(y)]}),e.jsxs("span",{children:[e.jsx(x,{icon:B})," ",w(m)]}),e.jsx("p",{className:"text-[15px] text-black/70 w-full",children:v})]})]})]})},r=({handleChange:s,value:l,title:d,name:c})=>e.jsxs("label",{className:"sidebar-label-container",children:[e.jsx("input",{type:"radio",name:c,className:"text-harPrimary",value:l,onChange:s}),e.jsx("span",{className:"mt-0.5 checkmark"}),e.jsx("span",{className:"text-black",children:d})]}),Y=({handleChange:s})=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-black text-base font-medium mb-2",children:"Experiance level"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-1",children:[e.jsxs("label",{className:"sidebar-label-container",children:[e.jsx("input",{type:"radio",name:"test",value:"",defaultChecked:!0,onChange:s}),e.jsx("span",{className:"mt-0.5 checkmark"}),e.jsx("span",{className:"text-black",children:"All"})]}),e.jsx(r,{handleChange:s,value:"Intership",title:"Intership",name:"test"}),e.jsx(r,{handleChange:s,value:"Junior",title:"Junior",name:"test"}),e.jsx(r,{handleChange:s,value:"Senior",title:"Senior",name:"test"}),e.jsx(r,{handleChange:s,value:"Expert",title:"Expert",name:"test"})]})]}),z=({handleChange:s})=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-black text-base font-medium mb-2",children:"Category"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-1",children:[e.jsxs("label",{className:"sidebar-label-container",children:[e.jsx("input",{type:"radio",name:"test",value:"",defaultChecked:!0,onChange:s}),e.jsx("span",{className:"mt-0.5 checkmark"}),e.jsx("span",{className:"text-black",children:"Any"})]}),e.jsx(r,{handleChange:s,value:"information_technology",title:"IT",name:"test"}),e.jsx(r,{handleChange:s,value:"hr",title:"Human resource",name:"test"}),e.jsx(r,{handleChange:s,value:"software_development",title:"Software development",name:"test"}),e.jsx(r,{handleChange:s,value:"marketing_and_sales",title:"Marketing and sales",name:"test"}),e.jsx(r,{handleChange:s,value:"product_management",title:"Project managment",name:"test"})]})]}),G=({handleChange:s})=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-black text-base font-medium mb-2",children:"Type of employement"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-1",children:[e.jsxs("label",{className:"sidebar-label-container",children:[e.jsx("input",{type:"radio",name:"test",value:"",defaultChecked:!0,onChange:s}),e.jsx("span",{className:"mt-0.5 checkmark"}),e.jsx("span",{className:"text-black",children:"Any"})]}),e.jsx(r,{handleChange:s,value:"In_person",title:"In-person",name:"test"}),e.jsx(r,{handleChange:s,value:"Hybrid",title:"Hybrid",name:"test"}),e.jsx(r,{handleChange:s,value:"Remote",title:"Remote",name:"test"})]})]}),K=({handleChange:s})=>e.jsxs("div",{className:"space-y-5",children:[e.jsx("h3",{className:"text-black text-lg font-semibold mb-2 ",children:"Filters"}),e.jsx(z,{handleChange:s}),e.jsx(Y,{handleChange:s}),e.jsx(G,{handleChange:s})]}),V=()=>e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[e.jsx(x,{icon:O})," Email me for jobs"]}),e.jsx("p",{className:"text-black/75 text-base mb-4",children:"Be the first one notified when a new job is posted"}),e.jsxs("div",{className:"w-full space-y-4",children:[e.jsx("input",{type:"email",className:"w-full border focus:outline-none border-harSecondary rounded-sm bg-white py-2 px-4",name:"email",id:"email",placeholder:"name@email.com"}),e.jsx("input",{type:"submit",value:"Subscribe",className:"w-full bg-harSecondary rounded-sm text-white cursor-pointer p-2"})]})]}),X=async(s=1,l=10,d="")=>{const c=`https://harconsultancy.org//api/job-postings?page=${s}&limit=${l}&query=${d}`;console.log(`Fetching job postings from: ${c}`);const u=await fetch(c);if(!u.ok)throw new Error("Failed to fetch job postings from service");const m=await u.json();return console.log(m),m},te=()=>{const[s,l]=i.useState([]),[d,c]=i.useState(null),[u,m]=i.useState(!0),[a,f]=i.useState(1),[v,y]=i.useState(!0),p=6,[n,w]=i.useState(""),b=t=>{w(t.target.value)},h=i.useCallback(async()=>{console.log("Calling loadJobsPostings"),console.log(`Fetching jobs for page ${a} with query "${n}"`);try{const t=await X(a,5,n);l(o=>[...o,...t]),l(a===1?t:o=>[...o,...t]),t.length<=5&&y(!1)}catch(t){console.error("Failed to fetch job postings: ",t)}finally{m(!1)}},[a,n]);i.useEffect(()=>{m(!0),h()},[a,h,n]);const g=s.filter(t=>t.jobTitle.toLowerCase().indexOf(n.toLowerCase())!==-1),k=t=>{c(t.target.value)},L=t=>{c(t.target.value)},I=()=>{const t=(a-1)*6,o=t+p;return{startIndex:t,endIndex:o}},P=()=>{a<Math.ceil(g.length/p)&&f(a+1)},J=()=>{a>1&&f(a-1)},N=((t,o,F)=>{let j=t;F&&(j=g),o&&(j=j.filter(({workArrangement:S,experienceLevel:C,jobType:T,jobCategory:_})=>T.toLowerCase()===o.toLowerCase()||S.toLowerCase()===o.toLowerCase()||C.toLowerCase()===o.toLowerCase()||_.toLowerCase()===o.toLowerCase()));const{startIndex:E,endIndex:$}=I();return j=j.slice(E,$),j.map((S,C)=>e.jsx(Q,{job:S},C))})(s,d,n);return e.jsxs("div",{className:"text-black min-h-screen bg-gray-100",children:[e.jsx(U,{query:n,handleInputChange:b}),e.jsxs("div",{className:"bg-gray-100 sm:grid grid-cols-4 gap-8 lg:px-16 px-4 py-12",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded",children:e.jsx(K,{handleChange:k,handleClick:L})}),e.jsxs("div",{className:"bg-gray-50 col-span-2 p-4 rounded",children:[u?e.jsx("p",{className:"font-bold text-lg",children:"Loading...."}):N.length>0?e.jsx(W,{result:N}):e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"text-lg text-black font-semibold",children:[N.length," Jobs"]}),e.jsx("p",{className:"text-black",children:"No data found!"})]}),N.length>0?e.jsxs("div",{className:"flex justify-center mt-4 space-x-8",children:[e.jsx("button",{className:"text-black/70 btn btn-ghost disabled:bg-inherit focus:outline-none",onClick:J,disabled:a===1,children:"Previous"}),e.jsxs("span",{className:"text-black/70 my-3 font-mono",children:["Page ",a," of"," ",Math.ceil(g.length/p)]}),e.jsx("button",{className:"text-black/70 btn btn-ghost disabled:bg-inherit focus:outline-none",onClick:P,disabled:!v,children:"Next"})]}):""]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded",children:e.jsx(V,{})})]})]})};export{te as default};
