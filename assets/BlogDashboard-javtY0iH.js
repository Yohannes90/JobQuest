import{r as a,u as N,j as e,F as x}from"./index-SXu9pS1V.js";import{B as f}from"./BlogPostForm-IbDx9ixZ.js";import{k as P,j as B}from"./index-BwX07M8r.js";const k=()=>{const[l,r]=a.useState("blogPosts"),[n,i]=a.useState([]),[m,d]=a.useState(null),[g,h]=a.useState(!1),p={id:1,name:"John Doe",role:"Admin"},o=N();a.useEffect(()=>{let s=!0;(async()=>{try{const t=await fetch("https://har-backend.vercel.app/api/blog-postings/all",{credentials:"include"});if(t.status===401)o("/login");else if(s){const y=await t.json();i(y)}}catch(t){console.error("Error fetching blog posts:",t)}})()},[o]);const b=async s=>{try{(await fetch(`https://har-backend.vercel.app/api/blogs/${s}`,{method:"DELETE",credentials:"include"})).status===401?o("/login"):i(n.filter(t=>t.id!==s))}catch(c){console.error("Error deleting blog post:",c)}},u=s=>{d(s),h(!0),r("addBlogPost")},j=async()=>{try{await fetch("https://har-backend.vercel.app/api/logout",{method:"POST",credentials:"include"}),o("/login")}catch(s){console.error("Error logging out:",s)}};return e.jsxs("div",{className:"min-h-screen bg-gray-100 p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center text-harPrimary",children:"Blog Admin Dashboard"}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("div",{className:"flex space-x-4",children:e.jsx("button",{onClick:()=>r("blogPosts"),className:`px-4 py-2 rounded ${l==="blogPosts"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Blog Posts"})}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-harPrimary text-white rounded",children:"Logout"})]}),l==="blogPosts"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Blog Posts"}),e.jsx("button",{onClick:()=>{d(null),h(!1),r("addBlogPost")},className:"px-4 py-2 bg-harSecondary text-white rounded mb-4",children:"Add Blog Post"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Title"}),e.jsx("th",{className:"py-2 px-4",children:"Category"}),e.jsx("th",{className:"py-2 px-4",children:"Content"}),e.jsx("th",{className:"py-2 px-4",children:"Author ID"}),e.jsx("th",{className:"py-2 px-4",children:"Publication Date"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:n.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:s.title}),e.jsx("td",{className:"py-2 px-4",children:s.category}),e.jsx("td",{className:"py-2 px-4",children:s.content}),e.jsx("td",{className:"py-2 px-4",children:s.authorId}),e.jsx("td",{className:"py-2 px-4",children:"post.publicationDate"}),e.jsxs("td",{className:"py-2 px-4 flex space-x-2",children:[e.jsx("button",{onClick:()=>u(s),className:"text-green-500",children:e.jsx(x,{icon:P})}),e.jsx("button",{onClick:()=>b(s.id),className:"text-red-500",children:e.jsx(x,{icon:B})})]})]},s.id))})]})})]}),l==="addBlogPost"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:g?"Edit Blog Post":"Add Blog Post"}),e.jsx(f,{post:m,currentUserId:p.id})]})]})};export{k as default};
