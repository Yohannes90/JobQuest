import{j as e,F as x,u as H,r as c}from"./index-LXmI8Bk4.js";import{f as M,a as q,b as B,c as O,d as U,e as W,g as V}from"./index-BwX07M8r.js";const Q=({query:s,handleInputChange:r})=>e.jsx("div",{className:"mt-20 py-10 max-w-screen-2xl container",children:e.jsx("div",{className:"flex flex-grow justify-center",children:e.jsx("form",{action:"",method:"get",className:"w-11/12 sm:w-3/4",children:e.jsxs("div",{className:"flex justify-start flex-grow gap-1",children:[e.jsxs("div",{className:"relative py-1 px-6 focus:outline-0 bg-white h-auto rounded shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-harSecondary w-full",children:[e.jsx("input",{type:"text",name:"query",id:"query",className:"w-full bg-white py-2 px-4 focus:outline-0",placeholder:"What position are you looking for ?",onChange:r,value:s}),e.jsx(x,{icon:M,className:"absolute bottom-1/2 translate-y-1/2 left-5"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"h-full px-1 sm:px-3 rounded-sm text-white font-mono sm:tracking-wider bg-harSecondary",children:"Search"})})]})})})}),Y=({result:s})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("h3",{className:"text-black text-lg font-bold",children:[s.length," Jobs"]})}),e.jsx("section",{children:s})]}),z=({job:s})=>{const r=H(),d=()=>{r("/job-application-form",{state:{job:s}})},{companyName:i,jobTitle:u,applicationDeadline:m,experienceLevel:a,jobType:g,description:f,jobCategory:j,workArrangement:k}=s;function h(l){return l.replace(/_/g," ")}function y(l){const p=new Date(l),S=p.getFullYear(),v=String(p.getMonth()+1).padStart(2,"0");return`${String(p.getDay()).padStart(2,"0")}-${v}-${S}`}return e.jsxs("section",{className:"card grid grid-cols-4 transform hover:ease-in-out duration-200 hover:border-harSecondary focus:border-harSecondary",onClick:d,children:[e.jsx("img",{src:"/icon.png",className:"h-8 w-8 sm:h-12 sm:w-14 col-span-1",alt:""}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("h4",{className:"text-black mb-1",children:i}),e.jsx("h3",{className:"text-black text-lg font-semibold mb-2",children:u}),e.jsxs("div",{className:"text-black/60 text-sm sm:text-base flex flex-wrap gap-4 mb-2",children:[e.jsxs("span",{children:[e.jsx(x,{icon:q})," ",h(g)]}),e.jsxs("span",{children:[e.jsx(x,{icon:B})," ",h(k)]}),e.jsxs("span",{children:[e.jsx(x,{icon:O})," ",h(a)]}),e.jsxs("span",{children:[e.jsx(x,{icon:U})," ",j==="hr"?"human resource":h(j)]}),e.jsxs("span",{children:[e.jsx(x,{icon:W})," ",y(m)]}),e.jsx("p",{className:"text-[15px] text-black/70 w-full",children:f})]})]})]})},o=({handleChange:s,value:r,title:d,name:i})=>e.jsxs("label",{className:"sidebar-label-container",children:[e.jsx("input",{type:"radio",name:i,className:"text-harPrimary",value:r,onChange:s}),e.jsx("span",{className:"mt-0.5 checkmark"}),e.jsx("span",{className:"text-black",children:d})]}),G=({handleChange:s})=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-black text-base font-medium mb-2",children:"Experiance level"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-1",children:[e.jsxs("label",{className:"sidebar-label-container",children:[e.jsx("input",{type:"radio",name:"test",value:"",defaultChecked:!0,onChange:s}),e.jsx("span",{className:"mt-0.5 checkmark"}),e.jsx("span",{className:"text-black",children:"All"})]}),e.jsx(o,{handleChange:s,value:"Intership",title:"Intership",name:"test"}),e.jsx(o,{handleChange:s,value:"Junior",title:"Junior",name:"test"}),e.jsx(o,{handleChange:s,value:"Senior",title:"Senior",name:"test"}),e.jsx(o,{handleChange:s,value:"Expert",title:"Expert",name:"test"})]})]}),K=({handleChange:s})=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-black text-base font-medium mb-2",children:"Category"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-1",children:[e.jsxs("label",{className:"sidebar-label-container",children:[e.jsx("input",{type:"radio",name:"test",value:"",defaultChecked:!0,onChange:s}),e.jsx("span",{className:"mt-0.5 checkmark"}),e.jsx("span",{className:"text-black",children:"Any"})]}),e.jsx(o,{handleChange:s,value:"information_technology",title:"IT",name:"test"}),e.jsx(o,{handleChange:s,value:"hr",title:"Human resource",name:"test"}),e.jsx(o,{handleChange:s,value:"software_development",title:"Software development",name:"test"}),e.jsx(o,{handleChange:s,value:"marketing_and_sales",title:"Marketing and sales",name:"test"}),e.jsx(o,{handleChange:s,value:"product_management",title:"Project managment",name:"test"})]})]}),X=({handleChange:s})=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-black text-base font-medium mb-2",children:"Type of employement"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-1",children:[e.jsxs("label",{className:"sidebar-label-container",children:[e.jsx("input",{type:"radio",name:"test",value:"",defaultChecked:!0,onChange:s}),e.jsx("span",{className:"mt-0.5 checkmark"}),e.jsx("span",{className:"text-black",children:"Any"})]}),e.jsx(o,{handleChange:s,value:"In_person",title:"In-person",name:"test"}),e.jsx(o,{handleChange:s,value:"Hybrid",title:"Hybrid",name:"test"}),e.jsx(o,{handleChange:s,value:"Remote",title:"Remote",name:"test"})]})]}),Z=({handleChange:s})=>e.jsxs("div",{className:"space-y-5",children:[e.jsx("h3",{className:"text-black text-lg font-semibold mb-2 ",children:"Filters"}),e.jsx(K,{handleChange:s}),e.jsx(G,{handleChange:s}),e.jsx(X,{handleChange:s})]}),ee=()=>e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[e.jsx(x,{icon:V})," Email me for jobs"]}),e.jsx("p",{className:"text-black/75 text-base mb-4",children:"Be the first one notified when a new job is posted"}),e.jsxs("div",{className:"w-full space-y-4",children:[e.jsx("input",{type:"email",className:"w-full border focus:outline-none border-harSecondary rounded-sm bg-white py-2 px-4",name:"email",id:"email",placeholder:"name@email.com"}),e.jsx("input",{type:"submit",value:"Subscribe",className:"w-full bg-harSecondary rounded-sm text-white cursor-pointer p-2"})]})]});var se={VITE_BASE_PATH:"/harWebsite/",BASE_URL:"/harWebsite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const te=async(s=1,r=10,d="")=>{const i=`${se.VITE_API_URL}/api/job-postings?page=${s}&limit=${r}&query=${d}`;console.log(`Fetching job postings from: ${i}`);const u=await fetch(i);if(!u.ok)throw new Error("Failed to fetch job postings from service");const m=await u.json();return console.log(m),m},re=()=>{const[s,r]=c.useState([]),[d,i]=c.useState(null),[u,m]=c.useState(!0),[a,g]=c.useState(1),[f,j]=c.useState(!0),[k,h]=c.useState(0),y=5,[l,p]=c.useState(""),S=t=>{p(t.target.value)},v=c.useCallback(async()=>{try{const t=await fetch("http://localhost:3001/api/job-postings/count"),n=await t.json();if(t.ok){const w=n.count;console.log(w),h(w)}else console.log("Error: failed to fetch the job count from the server")}catch(t){console.log("Error: failed to fetch from the server",t)}},[]),C=c.useCallback(async()=>{console.log("Calling loadJobsPostings"),console.log(`Fetching jobs for page ${a} with query "${l}"`);try{const t=await te(a,5,l);r(n=>[...n,...t]),r(a===1?t:n=>[...n,...t]),t.length<5&&j(!1)}catch(t){console.error("Failed to fetch job postings: ",t)}finally{m(!1)}},[a,l]);c.useEffect(()=>{m(!0),C(),v()},[a,v,C,l]);const I=s.filter(t=>t.jobTitle.toLowerCase().indexOf(l.toLowerCase())!==-1),P=t=>{i(t.target.value)},_=t=>{i(t.target.value)},J=()=>{const t=(a-1)*5,n=t+y;return{startIndex:t,endIndex:n}},T=()=>{f&&(g(a+1),console.log("working"))},F=()=>{a>1&&(g(a-1),j(!0))},N=((t,n,w)=>{let b=t;w&&(b=I),n&&(b=b.filter(({workArrangement:E,experienceLevel:L,jobType:D,jobCategory:R})=>D.toLowerCase()===n.toLowerCase()||E.toLowerCase()===n.toLowerCase()||L.toLowerCase()===n.toLowerCase()||R.toLowerCase()===n.toLowerCase()));const{startIndex:A,endIndex:$}=J();return b=b.slice(A,$),b.map((E,L)=>e.jsx(z,{job:E},L))})(s,d,l);return e.jsxs("div",{className:"text-black min-h-screen bg-gray-100",children:[e.jsx(Q,{query:l,handleInputChange:S}),e.jsxs("div",{className:"bg-gray-100 sm:grid grid-cols-4 gap-8 lg:px-16 px-4 py-12",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded",children:e.jsx(Z,{handleChange:P,handleClick:_})}),e.jsxs("div",{className:"bg-gray-50 col-span-2 p-4 rounded",children:[u?e.jsx("p",{className:"font-bold text-lg",children:"Loading...."}):N.length>0?e.jsx(Y,{result:N}):e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"text-lg text-black font-semibold",children:[N.length," Jobs"]}),e.jsx("p",{className:"text-black",children:"No data found!"})]}),N.length>0?e.jsxs("div",{className:"flex justify-center mt-4 space-x-8",children:[e.jsx("button",{className:"text-black/70 btn btn-ghost disabled:bg-inherit focus:outline-none",onClick:F,disabled:a===1,children:"Previous"}),e.jsxs("span",{className:"text-black/70 my-3 font-mono",children:["Page ",a," of ",Math.ceil(k/y)]}),e.jsx("button",{className:"text-black/70 btn btn-ghost disabled:bg-inherit focus:outline-none",onClick:T,disabled:!f,children:"Next"})]}):""]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded",children:e.jsx(ee,{})})]})]})};export{re as default};
