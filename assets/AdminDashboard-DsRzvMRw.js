import{r,j as e,u as W,F as x}from"./index-CElz7TYM.js";import{J as G}from"./JobPostForm-3MauI9yg.js";import{j as f,k as P}from"./index-BwX07M8r.js";import{B as H}from"./BlogPostForm-Bsj44hog.js";import"./Error-C8-LmoTb.js";var D={VITE_BASE_PATH:"/harWebsite/",BASE_URL:"/harWebsite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const z=({editingUser:t,isEditing:l,setIsEditing:u,setActiveTab:N})=>{const[i,m]=r.useState({name:"",email:"",role:"",password:""});r.useEffect(()=>{m(l&&t?{name:t.name,email:t.email,role:t.role,password:""}:{name:"",email:"",role:"",password:""})},[l,t]);const d=j=>{const{name:p,value:y}=j.target;m(b=>({...b,[p]:y}))},g=async j=>{j.preventDefault();const p=l?t?`${D.VITE_API_URL}/api/users/${t.id}`:"-1":`${D.VITE_API_URL}/api/users`,y=l?"PUT":"POST";try{await fetch(p,{method:y,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),u(!1),N("users")}catch(b){console.error("Error submitting form:",b)}};return e.jsxs("form",{onSubmit:g,className:"bg-white p-6 rounded shadow-md",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-bold mb-2",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:d,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-bold mb-2",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:d,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-bold mb-2",children:"Role"}),e.jsxs("select",{id:"role",name:"role",value:i.role,onChange:d,className:"w-full p-2 border border-gray-300 rounded",required:!0,children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"ADMIN",children:"Admin"}),e.jsx("option",{value:"JOBS_ADMIN",children:"Jobs Admin"}),e.jsx("option",{value:"BLOG_ADMIN",children:"Blog Admin"})]})]}),!l&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-bold mb-2",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:i.password,onChange:d,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full py-2 px-4 bg-harPrimary text-white font-bold rounded",children:l?"Update User":"Add User"})]})},ee=()=>{const[t,l]=r.useState("employees"),[u,N]=r.useState([]),[i,m]=r.useState([]),[d,g]=r.useState([]),[j,p]=r.useState(null),[y,b]=r.useState(null),[k,E]=r.useState(!1),[v,w]=r.useState(!1),[A,S]=r.useState([]),[B,J]=r.useState(null),[T,C]=r.useState(!1),U={id:1,name:"John Doe",role:"Admin"},n=W();r.useEffect(()=>{let s=!0;const o=async()=>{try{const a=await fetch("http://localhost:3001/api/job-applications",{credentials:"include"});if(a.status===401)n("/login");else if(s){const h=await a.json();N(h)}}catch(a){console.error("Error fetching job applications:",a)}},c=async()=>{try{const a=await fetch("http://localhost:3001/api/job-postings/all",{credentials:"include"});if(a.status===401)n("/login");else if(s){const h=await a.json();m(h)}}catch(a){console.error("Error fetching job postings:",a)}},V=async()=>{try{const a=await fetch("http://localhost:3001/api/users",{credentials:"include"});if(a.status===401)n("/login");else if(s){const h=await a.json();g(h)}}catch(a){console.error("Error fetching users:",a)}},q=async()=>{try{const a=await fetch("http://localhost:3001/api/blog-postings/all",{credentials:"include"});if(a.status===401)n("/login");else if(s){const h=await a.json();S(h)}}catch(a){console.error("Error fetching blog posts:",a)}};return o(),c(),V(),q(),()=>{s=!1}},[n]);const I=async s=>{try{(await fetch(`http://localhost:3001/api/job-applications/${s}`,{method:"DELETE",credentials:"include"})).status===401?n("/login"):N(u.filter(c=>c.id!==s))}catch(o){console.error("Error deleting application:",o)}},_=async s=>{try{(await fetch(`http://localhost:3001/api/job-postings/${s}`,{method:"DELETE",credentials:"include"})).status===401?n("/login"):m(i.filter(c=>c.id!==s))}catch(o){console.error("Error deleting job posting:",o)}},L=async s=>{try{(await fetch(`http://localhost:3001/api/users/${s}`,{method:"DELETE",credentials:"include"})).status===401?n("/login"):g(d.filter(c=>c.id!==s))}catch(o){console.error("Error deleting user:",o)}},$=async s=>{try{(await fetch(`http://localhost:3001/api/blogs/${s}`,{method:"DELETE",credentials:"include"})).status===401?n("/login"):S(A.filter(c=>c.id!==s))}catch(o){console.error("Error deleting blog post:",o)}},F=s=>{p(s),E(!0),l("addJobPost")},M=s=>{b(s),w(!0),l("addUser")},R=s=>{J(s),C(!0),l("addBlogPost")},O=async()=>{try{await fetch("http://localhost:3001/api/logout",{method:"POST",credentials:"include"}),n("/login")}catch(s){console.error("Error logging out:",s)}};return e.jsxs("div",{className:"min-h-screen bg-gray-100 p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center text-harPrimary",children:"Admin Dashboard"}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>l("employees"),className:`px-4 py-2 rounded ${t==="employees"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Potential Employees"}),e.jsx("button",{onClick:()=>l("jobPosts"),className:`px-4 py-2 rounded ${t==="jobPosts"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Job Posts"}),e.jsx("button",{onClick:()=>l("blogPosts"),className:`px-4 py-2 rounded ${t==="blogPosts"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Blog Posts"}),e.jsx("button",{onClick:()=>l("users"),className:`px-4 py-2 rounded ${t==="users"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Users"})]}),e.jsx("button",{onClick:O,className:"px-4 py-2 bg-harPrimary text-white rounded",children:"Logout"})]}),t==="employees"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Job Applications"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Applicant Name"}),e.jsx("th",{className:"py-2 px-4",children:"Position"}),e.jsx("th",{className:"py-2 px-4",children:"About"}),e.jsx("th",{className:"py-2 px-4",children:"Motive"}),e.jsx("th",{className:"py-2 px-4",children:"Age"}),e.jsx("th",{className:"py-2 px-4",children:"Gender"}),e.jsx("th",{className:"py-2 px-4",children:"Phone"}),e.jsx("th",{className:"py-2 px-4",children:"Email"}),e.jsx("th",{className:"py-2 px-4",children:"Portfolio"}),e.jsx("th",{className:"py-2 px-4",children:"CV"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:u.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:s.name}),e.jsx("td",{className:"py-2 px-4",children:s.interest}),e.jsx("td",{className:"py-2 px-4",children:s.about}),e.jsx("td",{className:"py-2 px-4",children:s.motive}),e.jsx("td",{className:"py-2 px-4",children:s.age}),e.jsx("td",{className:"py-2 px-4",children:s.gender}),e.jsx("td",{className:"py-2 px-4",children:s.phone}),e.jsx("td",{className:"py-2 px-4",children:s.email}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("a",{href:s.portfolio,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"View"})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("a",{href:s.cv,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"View"})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("button",{onClick:()=>I(s.id),className:"text-red-500",children:e.jsx(x,{icon:f})})})]},s.id))})]})})]}),t==="jobPosts"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Job Postings"}),e.jsx("button",{onClick:()=>{p(null),E(!1),l("addJobPost")},className:"px-4 py-2 bg-harSecondary text-white rounded mb-4",children:"Add Job Posting"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Company Name"}),e.jsx("th",{className:"py-2 px-4",children:"Job Title"}),e.jsx("th",{className:"py-2 px-4",children:"Location"}),e.jsx("th",{className:"py-2 px-4",children:"Posting Date"}),e.jsx("th",{className:"py-2 px-4",children:"Experience Level"}),e.jsx("th",{className:"py-2 px-4",children:"Job Type"}),e.jsx("th",{className:"py-2 px-4",children:"Employment Type"}),e.jsx("th",{className:"py-2 px-4",children:"Work Arrangement"}),e.jsx("th",{className:"py-2 px-4",children:"Application Deadline"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:s.jobTitle}),e.jsx("td",{className:"py-2 px-4",children:s.companyName}),e.jsx("td",{className:"py-2 px-4",children:s.location}),e.jsx("td",{className:"py-2 px-4",children:s.jobType}),e.jsx("td",{className:"py-2 px-4",children:s.jobCategory}),e.jsx("td",{className:"py-2 px-4",children:s.workArrangement}),e.jsx("td",{className:"py-2 px-4",children:s.experienceLevel}),e.jsx("td",{className:"py-2 px-4",children:s.contactEmail}),e.jsx("td",{className:"py-2 px-4",children:s.applicationDeadline}),e.jsxs("td",{className:"py-2 px-4 flex space-x-2",children:[e.jsx("button",{onClick:()=>F(s),className:"text-green-500",children:e.jsx(x,{icon:P})}),e.jsx("button",{onClick:()=>_(s.id),className:"text-red-500",children:e.jsx(x,{icon:f})})]})]},s.id))})]})})]}),t==="addJobPost"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:k?"Edit Job Posting":"Add Job Posting"}),e.jsx(G,{job:j})]}),t==="blogPosts"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Blog Posts"}),e.jsx("button",{onClick:()=>{J(null),C(!1),l("addBlogPost")},className:"px-4 py-2 bg-harSecondary text-white rounded mb-4",children:"Add Blog Post"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Title"}),e.jsx("th",{className:"py-2 px-4",children:"Category"}),e.jsx("th",{className:"py-2 px-4",children:"Content"}),e.jsx("th",{className:"py-2 px-4",children:"Author ID"}),e.jsx("th",{className:"py-2 px-4",children:"Publication Date"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:A.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:s.title}),e.jsx("td",{className:"py-2 px-4",children:s.category}),e.jsx("td",{className:"py-2 px-4",children:s.content}),e.jsx("td",{className:"py-2 px-4",children:s.authorId}),e.jsx("td",{className:"py-2 px-4",children:"post.publicationDate"}),e.jsxs("td",{className:"py-2 px-4 flex space-x-2",children:[e.jsx("button",{onClick:()=>R(s),className:"text-green-500",children:e.jsx(x,{icon:P})}),e.jsx("button",{onClick:()=>$(s.id),className:"text-red-500",children:e.jsx(x,{icon:f})})]})]},s.id))})]})})]}),t==="addBlogPost"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:T?"Edit Blog Post":"Add Blog Post"}),e.jsx(H,{post:B,currentUserId:U.id})]}),t==="users"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Users"}),e.jsx("button",{onClick:()=>{b(null),w(!1),l("addUser")},className:"px-4 py-2 bg-harSecondary text-white rounded mb-4",children:"Add User"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Name"}),e.jsx("th",{className:"py-2 px-4",children:"Email"}),e.jsx("th",{className:"py-2 px-4",children:"Role"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:d.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:s.name}),e.jsx("td",{className:"py-2 px-4",children:s.email}),e.jsx("td",{className:"py-2 px-4",children:s.role}),e.jsxs("td",{className:"py-2 px-4 flex space-x-2",children:[e.jsx("button",{onClick:()=>M(s),className:"text-green-500",children:e.jsx(x,{icon:P})}),e.jsx("button",{onClick:()=>L(s.id),className:"text-red-500",children:e.jsx(x,{icon:f})})]})]},s.id))})]})})]}),t==="addUser"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:v?"Edit User":"Add User"}),e.jsx(z,{editingUser:y,isEditing:v,setIsEditing:w,setActiveTab:l})]})]})};export{ee as default};
