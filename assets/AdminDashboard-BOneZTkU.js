import{r,j as e,u as F,F as y}from"./index-CjninIbF.js";import{J as L}from"./JobPostForm-CArMgtgf.js";import{j as w,k as P}from"./index-BwX07M8r.js";const M=({editingUser:a,isEditing:t,setIsEditing:u,setActiveTab:N})=>{const[o,h]=r.useState({name:"",email:"",role:"",password:""});r.useEffect(()=>{h(t&&a?{name:a.name,email:a.email,role:a.role,password:""}:{name:"",email:"",role:"",password:""})},[t,a]);const i=p=>{const{name:m,value:b}=p.target;h(x=>({...x,[m]:b}))},f=async p=>{p.preventDefault();const m=t?a?`http://localhost:3001/api/users/${a.id}`:"-1":"http://localhost:3001/api/users",b=t?"PUT":"POST";try{await fetch(m,{method:b,headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),u(!1),N("users")}catch(x){console.error("Error submitting form:",x)}};return e.jsxs("form",{onSubmit:f,className:"bg-white p-6 rounded shadow-md",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-bold mb-2",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:o.name,onChange:i,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-bold mb-2",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:o.email,onChange:i,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-bold mb-2",children:"Role"}),e.jsxs("select",{id:"role",name:"role",value:o.role,onChange:i,className:"w-full p-2 border border-gray-300 rounded",required:!0,children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"ADMIN",children:"Admin"}),e.jsx("option",{value:"JOBS_ADMIN",children:"Jobs Admin"}),e.jsx("option",{value:"BLOG_ADMIN",children:"Blog Admin"})]})]}),!t&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-bold mb-2",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:o.password,onChange:i,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full py-2 px-4 bg-harPrimary text-white font-bold rounded",children:t?"Update User":"Add User"})]})},q=()=>{const[a,t]=r.useState("employees"),[u,N]=r.useState([]),[o,h]=r.useState([]),[i,f]=r.useState([]),[p,m]=r.useState(null),[b,x]=r.useState(null),[A,v]=r.useState(!1),[E,g]=r.useState(!1),c=F();r.useEffect(()=>{let s=!0;const n=async()=>{try{const l=await fetch("http://localhost:3001/api/job-applications",{credentials:"include"});if(l.status===401)c("/login");else if(s){const j=await l.json();N(j)}}catch(l){console.error("Error fetching job applications:",l)}},d=async()=>{try{const l=await fetch("http://localhost:3001/api/job-postings/all",{credentials:"include"});if(l.status===401)c("/login");else if(s){const j=await l.json();h(j)}}catch(l){console.error("Error fetching job postings:",l)}},U=async()=>{try{const l=await fetch("http://localhost:3001/api/users",{credentials:"include"});if(l.status===401)c("/login");else if(s){const j=await l.json();f(j)}}catch(l){console.error("Error fetching users:",l)}};return n(),d(),U(),()=>{s=!1}},[c]);const J=async s=>{try{(await fetch(`http://localhost:3001/api/job-applications/${s}`,{method:"DELETE",credentials:"include"})).status===401?c("/login"):N(u.filter(d=>d.id!==s))}catch(n){console.error("Error deleting application:",n)}},S=async s=>{try{(await fetch(`http://localhost:3001/api/job-postings/${s}`,{method:"DELETE",credentials:"include"})).status===401?c("/login"):h(o.filter(d=>d.id!==s))}catch(n){console.error("Error deleting job posting:",n)}},k=async s=>{try{(await fetch(`http://localhost:3001/api/users/${s}`,{method:"DELETE",credentials:"include"})).status===401?c("/login"):f(i.filter(d=>d.id!==s))}catch(n){console.error("Error deleting user:",n)}},C=s=>{m(s),v(!0),t("addJobPost")},D=s=>{x(s),g(!0),t("addUser")},T=async()=>{try{await fetch("http://localhost:3001/api/logout",{method:"POST",credentials:"include"}),c("/login")}catch(s){console.error("Error logging out:",s)}};return e.jsxs("div",{className:"min-h-screen bg-gray-100 p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center text-harPrimary",children:"Admin Dashboard"}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>t("employees"),className:`px-4 py-2 rounded ${a==="employees"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Potential Employees"}),e.jsx("button",{onClick:()=>t("jobPosts"),className:`px-4 py-2 rounded ${a==="jobPosts"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Job Posts"}),e.jsx("button",{onClick:()=>t("users"),className:`px-4 py-2 rounded ${a==="users"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Users"})]}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-harPrimary text-white rounded",children:"Logout"})]}),a==="employees"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Job Applications"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Applicant Name"}),e.jsx("th",{className:"py-2 px-4",children:"Position"}),e.jsx("th",{className:"py-2 px-4",children:"About"}),e.jsx("th",{className:"py-2 px-4",children:"Motive"}),e.jsx("th",{className:"py-2 px-4",children:"Age"}),e.jsx("th",{className:"py-2 px-4",children:"Gender"}),e.jsx("th",{className:"py-2 px-4",children:"Phone"}),e.jsx("th",{className:"py-2 px-4",children:"Email"}),e.jsx("th",{className:"py-2 px-4",children:"Portfolio"}),e.jsx("th",{className:"py-2 px-4",children:"CV"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:u.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:s.name}),e.jsx("td",{className:"py-2 px-4",children:s.interest}),e.jsx("td",{className:"py-2 px-4",children:s.about}),e.jsx("td",{className:"py-2 px-4",children:s.motive}),e.jsx("td",{className:"py-2 px-4",children:s.age}),e.jsx("td",{className:"py-2 px-4",children:s.gender}),e.jsx("td",{className:"py-2 px-4",children:s.phone}),e.jsx("td",{className:"py-2 px-4",children:s.email}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("a",{href:s.portfolio,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"View"})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("a",{href:s.cv,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"View"})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("button",{onClick:()=>J(s.id),className:"text-red-500",children:e.jsx(y,{icon:w})})})]},s.id))})]})})]}),a==="jobPosts"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Job Postings"}),e.jsx("button",{onClick:()=>{m(null),v(!1),t("addJobPost")},className:"px-4 py-2 bg-harSecondary text-white rounded mb-4",children:"Add Job Posting"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Company Name"}),e.jsx("th",{className:"py-2 px-4",children:"Job Title"}),e.jsx("th",{className:"py-2 px-4",children:"Location"}),e.jsx("th",{className:"py-2 px-4",children:"Posting Date"}),e.jsx("th",{className:"py-2 px-4",children:"Experience Level"}),e.jsx("th",{className:"py-2 px-4",children:"Job Type"}),e.jsx("th",{className:"py-2 px-4",children:"Employment Type"}),e.jsx("th",{className:"py-2 px-4",children:"Work Arrangement"}),e.jsx("th",{className:"py-2 px-4",children:"Application Deadline"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:o.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:s.jobTitle}),e.jsx("td",{className:"py-2 px-4",children:s.companyName}),e.jsx("td",{className:"py-2 px-4",children:s.location}),e.jsx("td",{className:"py-2 px-4",children:s.jobType}),e.jsx("td",{className:"py-2 px-4",children:s.jobCategory}),e.jsx("td",{className:"py-2 px-4",children:s.workArrangement}),e.jsx("td",{className:"py-2 px-4",children:s.experienceLevel}),e.jsx("td",{className:"py-2 px-4",children:s.contactEmail}),e.jsx("td",{className:"py-2 px-4",children:s.applicationDeadline}),e.jsxs("td",{className:"py-2 px-4 flex space-x-2",children:[e.jsx("button",{onClick:()=>C(s),className:"text-green-500",children:e.jsx(y,{icon:P})}),e.jsx("button",{onClick:()=>S(s.id),className:"text-red-500",children:e.jsx(y,{icon:w})})]})]},s.id))})]})})]}),a==="addJobPost"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:A?"Edit Job Posting":"Add Job Posting"}),e.jsx(L,{job:p})]}),a==="users"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Users"}),e.jsx("button",{onClick:()=>{x(null),g(!1),t("addUser")},className:"px-4 py-2 bg-harSecondary text-white rounded mb-4",children:"Add User"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Name"}),e.jsx("th",{className:"py-2 px-4",children:"Email"}),e.jsx("th",{className:"py-2 px-4",children:"Role"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:s.name}),e.jsx("td",{className:"py-2 px-4",children:s.email}),e.jsx("td",{className:"py-2 px-4",children:s.role}),e.jsxs("td",{className:"py-2 px-4 flex space-x-2",children:[e.jsx("button",{onClick:()=>D(s),className:"text-green-500",children:e.jsx(y,{icon:P})}),e.jsx("button",{onClick:()=>k(s.id),className:"text-red-500",children:e.jsx(y,{icon:w})})]})]},s.id))})]})})]}),a==="addUser"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:E?"Edit User":"Add User"}),e.jsx(M,{editingUser:b,isEditing:E,setIsEditing:g,setActiveTab:t})]})]})};export{q as default};
