import{r as l,u as w,j as e,F as d}from"./index-LXmI8Bk4.js";import{J as A}from"./JobPostForm-CUijDE8b.js";import{j as y,k as J}from"./index-BwX07M8r.js";import"./Error-BdHpiQxS.js";var c={VITE_BASE_PATH:"/harWebsite/",BASE_URL:"/harWebsite/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const C=()=>{const[n,o]=l.useState("employees"),[x,h]=l.useState([]),[p,m]=l.useState([]),[N,j]=l.useState(null),[g,b]=l.useState(!1),r=w();l.useEffect(()=>{const s=async()=>{try{const t=await fetch(`${c.VITE_API_URL}/api/job-applications`,{credentials:"include"});if(t.status===401)r("/login");else{const i=await t.json();h(i)}}catch(t){console.error("Error fetching job applications:",t)}},a=async()=>{try{const t=await fetch(`${c.VITE_API_URL}/api/job-postings/all`,{credentials:"include"});if(t.status===401)r("/login");else{const i=await t.json();m(i)}}catch(t){console.error("Error fetching job postings:",t)}};s(),a()},[r]);const u=async s=>{try{(await fetch(`${c.VITE_API_URL}/api/job-applications/${s}`,{method:"DELETE",credentials:"include"})).status===401?r("/login"):h(x.filter(t=>t.id!==s))}catch(a){console.error("Error deleting application:",a)}},f=async s=>{try{(await fetch(`${c.VITE_API_URL}/api/job-postings/${s}`,{method:"DELETE",credentials:"include"})).status===401?r("/login"):m(p.filter(t=>t.id!==s))}catch(a){console.error("Error deleting job posting:",a)}},E=s=>{j(s),b(!0),o("addJobPost")},P=async()=>{try{await fetch(`${c.VITE_API_URL}/api/logout`,{method:"POST",credentials:"include"}),r("/login")}catch(s){console.error("Error logging out:",s)}};return e.jsxs("div",{className:"min-h-screen bg-gray-100 p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center text-harPrimary",children:"Admin Dashboard"}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>o("employees"),className:`px-4 py-2 rounded ${n==="employees"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Potential Employees"}),e.jsx("button",{onClick:()=>o("jobPosts"),className:`px-4 py-2 rounded ${n==="jobPosts"?"bg-harSecondary text-white":"bg-white text-harSecondary"}`,children:"Manage Job Posts"})]}),e.jsx("button",{onClick:P,className:"px-4 py-2 bg-harPrimary text-white rounded",children:"Logout"})]}),n==="employees"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Job Applications"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Applicant Name"}),e.jsx("th",{className:"py-2 px-4",children:"Position"}),e.jsx("th",{className:"py-2 px-4",children:"About"}),e.jsx("th",{className:"py-2 px-4",children:"Motive"}),e.jsx("th",{className:"py-2 px-4",children:"Age"}),e.jsx("th",{className:"py-2 px-4",children:"Gender"}),e.jsx("th",{className:"py-2 px-4",children:"Phone"}),e.jsx("th",{className:"py-2 px-4",children:"Email"}),e.jsx("th",{className:"py-2 px-4",children:"Portfolio"}),e.jsx("th",{className:"py-2 px-4",children:"CV"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:x.map(s=>e.jsxs("tr",{className:"bg-green-100 border-b hover:bg-green-200",children:[e.jsx("td",{className:"py-2 px-4",children:s.name}),e.jsx("td",{className:"py-2 px-4",children:s.interest}),e.jsx("td",{className:"py-2 px-4",children:s.about}),e.jsx("td",{className:"py-2 px-4",children:s.motive}),e.jsx("td",{className:"py-2 px-4",children:s.age}),e.jsx("td",{className:"py-2 px-4",children:s.gender}),e.jsx("td",{className:"py-2 px-4",children:s.phone}),e.jsx("td",{className:"py-2 px-4",children:s.email}),e.jsx("td",{className:"py-2 px-4",children:s.portfolio}),e.jsx("td",{className:"py-2 px-4",children:s.cv&&e.jsx("a",{href:`/${s.cv}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"View CV"})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("button",{className:"text-red-500",onClick:()=>u(s.id),children:e.jsx(d,{icon:y})})})]},s.id))})]})})]}),n==="jobPosts"&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:"Current Job Postings"}),e.jsx("button",{onClick:()=>{b(!1),j(null),o("addJobPost")},className:"px-4 py-2 mb-4 bg-harSecondary text-white rounded",children:"Add New Job"}),e.jsx("div",{className:"overflow-x-auto shadow-md sm:rounded-lg mb-8",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-harPrimary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4",children:"Job Title"}),e.jsx("th",{className:"py-2 px-4",children:"Company Name"}),e.jsx("th",{className:"py-2 px-4",children:"Location"}),e.jsx("th",{className:"py-2 px-4",children:"Job Type"}),e.jsx("th",{className:"py-2 px-4",children:"Job Category"}),e.jsx("th",{className:"py-2 px-4",children:"Work Arrangement"}),e.jsx("th",{className:"py-2 px-4",children:"Experience Level"}),e.jsx("th",{className:"py-2 px-4",children:"Application Deadline"}),e.jsx("th",{className:"py-2 px-4",children:"Contact Email"}),e.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:p.map(s=>e.jsxs("tr",{className:"bg-green-100 border-b hover:bg-green-200",children:[e.jsx("td",{className:"py-2 px-4",children:s.jobTitle}),e.jsx("td",{className:"py-2 px-4",children:s.companyName}),e.jsx("td",{className:"py-2 px-4",children:s.location}),e.jsx("td",{className:"py-2 px-4",children:s.jobType}),e.jsx("td",{className:"py-2 px-4",children:s.jobCategory}),e.jsx("td",{className:"py-2 px-4",children:s.workArrangement}),e.jsx("td",{className:"py-2 px-4",children:s.experienceLevel}),e.jsx("td",{className:"py-2 px-4",children:new Date(s.applicationDeadline).toLocaleDateString()}),e.jsx("td",{className:"py-2 px-4",children:s.contactEmail}),e.jsxs("td",{className:"py-2 px-4",children:[e.jsx("button",{className:"text-blue-500 mr-4",onClick:()=>E(s),children:e.jsx(d,{icon:J})}),e.jsx("button",{className:"text-red-500",onClick:()=>f(s.id),children:e.jsx(d,{icon:y})})]})]},s.id))})]})})]}),n==="addJobPost"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-harPrimary mb-4",children:g?"Edit Job Posting":"Add New Job Posting"}),e.jsx(A,{job:N})]})]})};export{C as default};
